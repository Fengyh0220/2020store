(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c8b2b66"],{"0a26":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var a=n("ad06"),i=n("78eb"),r=n("9884"),s=n("ea8e"),o=function(t){var e=t.parent,n=t.bem,o=t.role;return{mixins:[Object(r["a"])(e),i["a"]],props:{name:null,value:null,disabled:Boolean,iconSize:[Number,String],checkedColor:String,labelPosition:String,labelDisabled:Boolean,shape:{type:String,default:"round"},bindGroup:{type:Boolean,default:!0}},computed:{disableBindRelation:function(){return!this.bindGroup},isDisabled:function(){return this.parent&&this.parent.disabled||this.disabled},direction:function(){return this.parent&&this.parent.direction||null},iconStyle:function(){var t=this.checkedColor||this.parent&&this.parent.checkedColor;if(t&&this.checked&&!this.isDisabled)return{borderColor:t,backgroundColor:t}},tabindex:function(){return this.isDisabled||"radio"===o&&!this.checked?-1:0}},methods:{onClick:function(t){var e=this,n=t.target,a=this.$refs.icon,i=a===n||a.contains(n);this.isDisabled||!i&&this.labelDisabled?this.$emit("click",t):(this.toggle(),setTimeout((function(){e.$emit("click",t)})))},genIcon:function(){var t=this.$createElement,e=this.checked,i=this.iconSize||this.parent&&this.parent.iconSize;return t("div",{ref:"icon",class:n("icon",[this.shape,{disabled:this.isDisabled,checked:e}]),style:{fontSize:Object(s["a"])(i)}},[this.slots("icon",{checked:e})||t(a["a"],{attrs:{name:"success"},style:this.iconStyle})])},genLabel:function(){var t=this.$createElement,e=this.slots();if(e)return t("span",{class:n("label",[this.labelPosition,{disabled:this.isDisabled}])},[e])}},render:function(){var t=arguments[0],e=[this.genIcon()];return"left"===this.labelPosition?e.unshift(this.genLabel()):e.push(this.genLabel()),t("div",{attrs:{role:o,tabindex:this.tabindex,"aria-checked":String(this.checked)},class:n([{disabled:this.isDisabled,"label-disabled":this.labelDisabled},this.direction]),on:{click:this.onClick}},[e])}}}},3852:function(t,e,n){var a=n("96f3"),i=n("e2c0");function r(t,e){return null!=t&&i(t,e,a)}t.exports=r},"4e50":function(t,e,n){t.exports=n.p+"static/img/wx_pay.2731abb7.png"},"5eca":function(t,e,n){"use strict";var a=n("6874"),i=n.n(a);i.a},6874:function(t,e,n){},"78eb":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var a={inject:{vanField:{default:null}},watch:{value:function(){var t=this.vanField;t&&(t.resetValidation(),t.validateWithTrigger("onChange"))}},created:function(){var t=this.vanField;t&&!t.children&&(t.children=this)}}},8812:function(t,e,n){"use strict";n.r(e);var a,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"payment"},[t._m(0),a("van-cell-group",{staticClass:"payment_group"},[a("van-cell",{attrs:{title:"订单编号",value:t.order.orderInfo.orderSn}}),a("van-cell",{attrs:{title:"实付金额"}},[a("span",{staticClass:"red"},[t._v(t._s(t._f("yuan")(100*t.order.orderInfo.actualPrice)))])])],1),a("div",{staticClass:"pay_way_group"},[a("div",{staticClass:"pay_way_title"},[t._v("选择支付方式")]),a("van-radio-group",{model:{value:t.payWay,callback:function(e){t.payWay=e},expression:"payWay"}},[a("van-cell-group",[a("van-cell",[a("template",{slot:"title"},[a("img",{attrs:{src:n("d179"),alt:"支付宝",width:"82",height:"29"}})]),a("van-radio",{attrs:{name:"ali"}})],2),a("van-cell",[a("template",{slot:"title"},[a("img",{attrs:{src:n("4e50"),alt:"微信支付",width:"113",height:"23"}})]),a("van-radio",{attrs:{name:"wx"}})],2)],1)],1)],1),a("van-button",{staticClass:"pay_submit",attrs:{type:"primary",bottomAction:""},on:{click:t.pay}},[t._v("去支付")])],1)},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"time_down payment_group"},[t._v("\n    请在\n    "),n("span",{staticClass:"red"},[t._v("半小时内")]),t._v("\n    完成付款，否则系统自动取消订单\n  ")])}],s=n("bd86"),o=(n("68ef"),n("dc1b"),n("e27c")),c=(n("7f7f"),n("9d70"),n("3743"),n("dde9"),n("9f14")),d=(n("a481"),n("e17f"),n("2241")),l=n("3852"),u=n.n(l),h=n("4ec3"),p=n("3c96"),f={name:"payment",data:function(){return{payWay:"wx",order:{orderInfo:{},orderGoods:[]},orderId:0}},created:function(){u()(this.$route.params,"orderId")&&(this.orderId=this.$route.params.orderId,this.getOrder(this.orderId))},methods:{getOrder:function(t){var e=this;Object(h["N"])({orderId:t}).then((function(t){e.order=t.data.data}))},pay:function(){var t=this;d["a"].alert({message:"你选择了"+("wx"===this.payWay?"微信支付":"支付宝支付")}).then((function(){if("wx"===t.payWay){var e=navigator.userAgent.toLowerCase(),n=-1!=e.indexOf("micromessenger");n?Object(h["Q"])({orderId:t.orderId}).then((function(e){var n=e.data.data,a=JSON.stringify({appId:n.appId,timeStamp:n.timeStamp,nonceStr:n.nonceStr,package:n.packageValue,signType:"MD5",paySign:n.paySign});Object(p["d"])({prepay_data:a}),"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",t.onBridgeReady,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",t.onBridgeReady),document.attachEvent("onWeixinJSBridgeReady",t.onBridgeReady)):t.onBridgeReady()})).catch((function(t){d["a"].alert({message:t.data.errmsg}),that.$router.replace({name:"paymentStatus",params:{status:"failed"}})})):Object(h["O"])({orderId:t.orderId}).then((function(e){var n=e.data.data;window.location.replace(n.mwebUrl+"&redirect_url="+encodeURIComponent(window.location.origin+"/#/?orderId="+t.orderId+"&tip=yes"))})).catch((function(t){d["a"].alert({message:t.data.errmsg})}))}}))},onBridgeReady:function(){var t=this,e=Object(p["b"])("prepay_data");WeixinJSBridge.invoke("getBrandWCPayRequest",JSON.parse(e.prepay_data),(function(e){"get_brand_wcpay_request:ok"==e.err_msg?t.$router.replace({name:"paymentStatus",params:{status:"success"}}):"get_brand_wcpay_request:cancel"==e.err_msg?t.$router.replace({name:"paymentStatus",params:{status:"cancel"}}):t.$router.replace({name:"paymentStatus",params:{status:"failed"}})}))}},components:(a={},Object(s["a"])(a,c["a"].name,c["a"]),Object(s["a"])(a,o["a"].name,o["a"]),Object(s["a"])(a,d["a"].name,d["a"]),a)},m=f,b=(n("5eca"),n("2877")),v=Object(b["a"])(m,i,r,!1,null,"69f6685c",null);e["default"]=v.exports},"96f3":function(t,e){var n=Object.prototype,a=n.hasOwnProperty;function i(t,e){return null!=t&&a.call(t,e)}t.exports=i},9884:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return s}));var a=n("2b0e"),i=n("db85");function r(t,e){var n,r;void 0===e&&(e={});var s=e.indexKey||"index";return a["a"].extend({inject:(n={},n[t]={default:null},n),computed:(r={parent:function(){return this.disableBindRelation?null:this[t]}},r[s]=function(){return this.bindRelation(),this.parent?this.parent.children.indexOf(this):null},r),mounted:function(){this.bindRelation()},beforeDestroy:function(){var t=this;this.parent&&(this.parent.children=this.parent.children.filter((function(e){return e!==t})))},methods:{bindRelation:function(){if(this.parent&&-1===this.parent.children.indexOf(this)){var t=[].concat(this.parent.children,[this]);Object(i["a"])(t,this.parent),this.parent.children=t}}}})}function s(t){return{provide:function(){var e;return e={},e[t]=this,e},data:function(){return{children:[]}}}}},"9f14":function(t,e,n){"use strict";var a=n("d282"),i=n("0a26"),r=Object(a["a"])("radio"),s=r[0],o=r[1];e["a"]=s({mixins:[Object(i["a"])({bem:o,role:"radio",parent:"vanRadio"})],computed:{currentValue:{get:function(){return this.parent?this.parent.value:this.value},set:function(t){(this.parent||this).$emit("input",t)}},checked:function(){return this.currentValue===this.name}},methods:{toggle:function(){this.currentValue=this.name}}})},d179:function(t,e,n){t.exports=n.p+"static/img/ali_pay.41a79780.png"},db85:function(t,e,n){"use strict";function a(t){var e=[];function n(t){t.forEach((function(t){e.push(t),t.componentInstance&&n(t.componentInstance.$children.map((function(t){return t.$vnode}))),t.children&&n(t.children)}))}return n(t),e}function i(t,e){var n=e.$vnode.componentOptions;if(n&&n.children){var i=a(n.children);t.sort((function(t,e){return i.indexOf(t.$vnode)-i.indexOf(e.$vnode)}))}}n.d(e,"a",(function(){return i}))},dc1b:function(t,e,n){},dde9:function(t,e,n){},e27c:function(t,e,n){"use strict";var a=n("d282"),i=n("78eb"),r=n("9884"),s=Object(a["a"])("radio-group"),o=s[0],c=s[1];e["a"]=o({mixins:[Object(r["b"])("vanRadio"),i["a"]],props:{value:null,disabled:Boolean,direction:String,checkedColor:String,iconSize:[Number,String]},watch:{value:function(t){this.$emit("change",t)}},render:function(){var t=arguments[0];return t("div",{class:c([this.direction]),attrs:{role:"radiogroup"}},[this.slots()])}})}}]);
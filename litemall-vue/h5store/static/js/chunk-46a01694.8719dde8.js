(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46a01694"],{3852:function(a,e,t){var r=t("96f3"),n=t("e2c0");function i(a,e){return null!=a&&n(a,e,r)}a.exports=i},"4e50":function(a,e,t){a.exports=t.p+"static/img/wx_pay.2731abb7.png"},"5eca":function(a,e,t){"use strict";var r=t("6874"),n=t.n(r);n.a},6874:function(a,e,t){},8812:function(a,e,t){"use strict";t.r(e);var r,n=function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{staticClass:"payment"},[a._m(0),r("van-cell-group",{staticClass:"payment_group"},[r("van-cell",{attrs:{title:"订单编号",value:a.order.orderInfo.orderSn}}),r("van-cell",{attrs:{title:"实付金额"}},[r("span",{staticClass:"red"},[a._v(a._s(a._f("yuan")(100*a.order.orderInfo.actualPrice)))])])],1),r("div",{staticClass:"pay_way_group"},[r("div",{staticClass:"pay_way_title"},[a._v("选择支付方式")]),r("van-radio-group",{model:{value:a.payWay,callback:function(e){a.payWay=e},expression:"payWay"}},[r("van-cell-group",[r("van-cell",[r("template",{slot:"title"},[r("img",{attrs:{src:t("d179"),alt:"支付宝",width:"82",height:"29"}})]),r("van-radio",{attrs:{name:"ali"}})],2),r("van-cell",[r("template",{slot:"title"},[r("img",{attrs:{src:t("4e50"),alt:"微信支付",width:"113",height:"23"}})]),r("van-radio",{attrs:{name:"wx"}})],2)],1)],1)],1),r("van-button",{staticClass:"pay_submit",attrs:{type:"primary",bottomAction:""},on:{click:a.pay}},[a._v("去支付")])],1)},i=[function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"time_down payment_group"},[a._v("\n    请在\n    "),t("span",{staticClass:"red"},[a._v("半小时内")]),a._v("\n    完成付款，否则系统自动取消订单\n  ")])}],o=t("bd86"),s=(t("68ef"),t("dc1b"),t("e27c")),d=(t("7f7f"),t("9d70"),t("3743"),t("dde9"),t("9f14")),c=(t("a481"),t("e17f"),t("2241")),p=t("3852"),u=t.n(p),l=t("4ec3"),m=t("3c96"),y={name:"payment",data:function(){return{payWay:"wx",order:{orderInfo:{},orderGoods:[]},orderId:0}},created:function(){u()(this.$route.params,"orderId")&&(this.orderId=this.$route.params.orderId,this.getOrder(this.orderId))},methods:{getOrder:function(a){var e=this;Object(l["M"])({orderId:a}).then((function(a){e.order=a.data.data}))},pay:function(){var a=this;c["a"].alert({message:"你选择了"+("wx"===this.payWay?"微信支付":"支付宝支付")}).then((function(){if("wx"===a.payWay){var e=navigator.userAgent.toLowerCase(),t=-1!=e.indexOf("micromessenger");t?Object(l["P"])({orderId:a.orderId}).then((function(e){var t=e.data.data,r=JSON.stringify({appId:t.appId,timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.packageValue,signType:"MD5",paySign:t.paySign});Object(m["d"])({prepay_data:r}),"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",a.onBridgeReady,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",a.onBridgeReady),document.attachEvent("onWeixinJSBridgeReady",a.onBridgeReady)):a.onBridgeReady()})).catch((function(a){c["a"].alert({message:a.data.errmsg}),that.$router.replace({name:"paymentStatus",params:{status:"failed"}})})):Object(l["N"])({orderId:a.orderId}).then((function(e){var t=e.data.data;window.location.replace(t.mwebUrl+"&redirect_url="+encodeURIComponent(window.location.origin+"/#/?orderId="+a.orderId+"&tip=yes"))})).catch((function(a){c["a"].alert({message:a.data.errmsg})}))}}))},onBridgeReady:function(){var a=this,e=Object(m["b"])("prepay_data");WeixinJSBridge.invoke("getBrandWCPayRequest",JSON.parse(e.prepay_data),(function(e){"get_brand_wcpay_request:ok"==e.err_msg?a.$router.replace({name:"paymentStatus",params:{status:"success"}}):"get_brand_wcpay_request:cancel"==e.err_msg?a.$router.replace({name:"paymentStatus",params:{status:"cancel"}}):a.$router.replace({name:"paymentStatus",params:{status:"failed"}})}))}},components:(r={},Object(o["a"])(r,d["a"].name,d["a"]),Object(o["a"])(r,s["a"].name,s["a"]),Object(o["a"])(r,c["a"].name,c["a"]),r)},f=y,g=(t("5eca"),t("2877")),v=Object(g["a"])(f,n,i,!1,null,"69f6685c",null);e["default"]=v.exports},"96f3":function(a,e){var t=Object.prototype,r=t.hasOwnProperty;function n(a,e){return null!=a&&r.call(a,e)}a.exports=n},d179:function(a,e,t){a.exports=t.p+"static/img/ali_pay.41a79780.png"}}]);
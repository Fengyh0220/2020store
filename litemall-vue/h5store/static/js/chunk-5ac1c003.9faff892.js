(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ac1c003"],{1146:function(t,e,i){},1175:function(t,e,i){},"201a":function(t,e,i){},"311e":function(t,e,i){"use strict";var s=i("7de7"),n=i.n(s);n.a},3852:function(t,e,i){var s=i("96f3"),n=i("e2c0");function r(t,e){return null!=t&&n(t,e,s)}t.exports=r},"4b0a":function(t,e,i){"use strict";i("68ef"),i("786d")},"4cf9":function(t,e,i){},"4d48":function(t,e,i){"use strict";i("68ef"),i("bf60")},"4ec3":function(t,e,i){"use strict";i.d(e,"B",(function(){return r})),i.d(e,"v",(function(){return o})),i.d(e,"u",(function(){return c})),i.d(e,"h",(function(){return d})),i.d(e,"i",(function(){return p})),i.d(e,"g",(function(){return m})),i.d(e,"j",(function(){return v})),i.d(e,"k",(function(){return b})),i.d(e,"V",(function(){return S})),i.d(e,"l",(function(){return y})),i.d(e,"f",(function(){return j})),i.d(e,"E",(function(){return _})),i.d(e,"C",(function(){return F})),i.d(e,"D",(function(){return T})),i.d(e,"n",(function(){return L})),i.d(e,"m",(function(){return N})),i.d(e,"s",(function(){return B})),i.d(e,"r",(function(){return A})),i.d(e,"t",(function(){return D})),i.d(e,"q",(function(){return z})),i.d(e,"o",(function(){return R})),i.d(e,"p",(function(){return K})),i.d(e,"x",(function(){return Q})),i.d(e,"w",(function(){return J})),i.d(e,"T",(function(){return X})),i.d(e,"S",(function(){return tt})),i.d(e,"U",(function(){return it})),i.d(e,"d",(function(){return nt})),i.d(e,"c",(function(){return at})),i.d(e,"e",(function(){return ut})),i.d(e,"b",(function(){return lt})),i.d(e,"R",(function(){return ht})),i.d(e,"P",(function(){return ft})),i.d(e,"N",(function(){return gt})),i.d(e,"O",(function(){return kt})),i.d(e,"M",(function(){return St})),i.d(e,"J",(function(){return yt})),i.d(e,"Q",(function(){return jt})),i.d(e,"L",(function(){return _t})),i.d(e,"K",(function(){return Ft})),i.d(e,"A",(function(){return Tt})),i.d(e,"F",(function(){return Lt})),i.d(e,"y",(function(){return Nt})),i.d(e,"z",(function(){return Bt})),i.d(e,"W",(function(){return At})),i.d(e,"G",(function(){return Dt})),i.d(e,"I",(function(){return qt})),i.d(e,"H",(function(){return zt})),i.d(e,"a",(function(){return Ut}));var s=i("b775"),n="wx/home/index";function r(){return Object(s["a"])({url:n,method:"get"})}var a="wx/catalog/index";function o(){return Object(s["a"])({url:a,method:"get"})}var u="wx/catalog/current";function c(t){return Object(s["a"])({url:u,method:"get",params:t})}var l="wx/auth/login";function d(t){return Object(s["a"])({url:l,method:"post",data:t})}var h="wx/auth/logout";function p(){return Object(s["a"])({url:h,method:"post"})}var f="wx/auth/info";function m(){return Object(s["a"])({url:f,method:"get"})}var g="wx/auth/profile";function v(t){return Object(s["a"])({url:g,method:"post",data:t})}var k="wx/auth/register";function b(t){return Object(s["a"])({url:k,method:"post",data:t})}function S(t){return Object(s["a"])({url:"wx/user/uploadImg",method:"post",data:t})}var O="wx/auth/reset";function y(t){return Object(s["a"])({url:O,method:"post",data:t})}var x="wx/auth/captcha";function j(t){return Object(s["a"])({url:x,method:"post",data:t})}var C="wx/goods/list";function _(t){return Object(s["a"])({url:C,method:"get",params:t})}var w="wx/goods/category";function F(t){return Object(s["a"])({url:w,method:"get",params:t})}var I="wx/goods/detail";function T(t){return Object(s["a"])({url:I,method:"get",params:t})}var $="wx/brand/list";function L(t){return Object(s["a"])({url:$,method:"get",params:t})}var P="wx/brand/detail";function N(t){return Object(s["a"])({url:P,method:"get",params:t})}var E="wx/cart/index";function B(t){return Object(s["a"])({url:E,method:"get",params:t})}var M="wx/cart/fastadd";function A(t){return Object(s["a"])({url:M,method:"post",data:t})}var V="wx/cart/update";function D(t){return Object(s["a"])({url:V,method:"post",data:t})}var q="wx/cart/delete";function z(t){return Object(s["a"])({url:q,method:"post",data:t})}var U="wx/cart/checked";function R(t){return Object(s["a"])({url:U,method:"post",data:t})}var G="wx/cart/checkout";function K(t){return Object(s["a"])({url:G,method:"get",params:t})}var H="wx/collect/list";function Q(t){return Object(s["a"])({url:H,method:"get",params:t})}var W="wx/collect/addordelete";function J(t){return Object(s["a"])({url:W,method:"post",data:t})}var Y="wx/topic/list";function X(t){return Object(s["a"])({url:Y,method:"get",params:t})}var Z="wx/topic/detail";function tt(t){return Object(s["a"])({url:Z,method:"get",params:t})}var et="wx/topic/related";function it(t){return Object(s["a"])({url:et,method:"get",params:t})}var st="wx/address/list";function nt(t){return Object(s["a"])({url:st,method:"get",params:t})}var rt="wx/address/detail";function at(t){return Object(s["a"])({url:rt,method:"get",params:t})}var ot="wx/address/save";function ut(t){return Object(s["a"])({url:ot,method:"post",data:t})}var ct="wx/address/delete";function lt(t){return Object(s["a"])({url:ct,method:"post",data:t})}var dt="wx/order/submit";function ht(t){return Object(s["a"])({url:dt,method:"post",data:t})}var pt="wx/order/prepay";function ft(t){return Object(s["a"])({url:pt,method:"post",data:t})}var mt="wx/order/h5pay";function gt(t){return Object(s["a"])({url:mt,method:"post",data:t})}var vt="wx/order/list";function kt(t){return Object(s["a"])({url:vt,method:"get",params:t})}var bt="wx/order/detail";function St(t){return Object(s["a"])({url:bt,method:"get",params:t})}var Ot="wx/order/cancel";function yt(t){return Object(s["a"])({url:Ot,method:"post",data:t})}var xt="wx/order/refund";function jt(t){return Object(s["a"])({url:xt,method:"post",data:t})}var Ct="wx/order/delete";function _t(t){return Object(s["a"])({url:Ct,method:"post",data:t})}var wt="wx/order/confirm";function Ft(t){return Object(s["a"])({url:wt,method:"post",data:t})}var It="wx/feedback/submit";function Tt(t){return Object(s["a"])({url:It,method:"post",data:t})}var $t="wx/groupon/list";function Lt(t){return Object(s["a"])({url:$t,method:"get",params:t})}var Pt="wx/coupon/mylist";function Nt(t){return Object(s["a"])({url:Pt,method:"get",params:t})}var Et="wx/coupon/selectlist";function Bt(t){return Object(s["a"])({url:Et,method:"get",params:t})}var Mt="wx/user/index";function At(){return Object(s["a"])({url:Mt,method:"get"})}var Vt="wx/issue/list";function Dt(){return Object(s["a"])({url:Vt,method:"get"})}function qt(){return Object(s["a"])({url:"/wx/groupon/listTimeLimit",method:"post"})}function zt(){return Object(s["a"])({url:"/wx/groupon/listPreSale",method:"post"})}var Ut=""},"565f":function(t,e,i){"use strict";var s=i("2638"),n=i.n(s),r=i("c31d"),a=i("1325"),o=i("482d"),u=i("a8fa"),c=i("d282"),l=i("a142"),d=i("ea8e"),h=i("ad06"),p=i("7744"),f=i("dfaf"),m=Object(c["a"])("field"),g=m[0],v=m[1];e["a"]=g({inheritAttrs:!1,provide:function(){return{vanField:this}},inject:{vanForm:{default:null}},props:Object(r["a"])(Object(r["a"])({},f["a"]),{},{name:String,rules:Array,disabled:Boolean,readonly:Boolean,autosize:[Boolean,Object],leftIcon:String,rightIcon:String,clearable:Boolean,formatter:Function,maxlength:[Number,String],labelWidth:[Number,String],labelClass:null,labelAlign:String,inputAlign:String,placeholder:String,errorMessage:String,errorMessageAlign:String,showWordLimit:Boolean,type:{type:String,default:"text"},error:{type:Boolean,default:null},colon:{type:Boolean,default:null}}),data:function(){return{focused:!1,validateMessage:""}},watch:{value:function(){this.resetValidation(),this.validateWithTrigger("onChange"),this.$nextTick(this.adjustSize)}},mounted:function(){this.format(),this.$nextTick(this.adjustSize),this.vanForm&&this.vanForm.addField(this)},beforeDestroy:function(){this.vanForm&&this.vanForm.removeField(this)},computed:{showClear:function(){return this.clearable&&this.focused&&""!==this.value&&Object(l["b"])(this.value)&&!this.readonly},showError:function(){return null!==this.error?this.error:!!(this.vanForm&&this.vanForm.showError&&this.validateMessage)||void 0},listeners:function(){return Object(r["a"])(Object(r["a"])({},this.$listeners),{},{blur:this.onBlur,focus:this.onFocus,input:this.onInput,click:this.onClickInput,keypress:this.onKeypress})},labelStyle:function(){var t=this.getProp("labelWidth");if(t)return{width:Object(d["a"])(t)}},formValue:function(){return this.children&&(this.$scopedSlots.input||this.$slots.input)?this.children.value:this.value}},methods:{focus:function(){this.$refs.input&&this.$refs.input.focus()},blur:function(){this.$refs.input&&this.$refs.input.blur()},runValidator:function(t,e){return new Promise((function(i){var s=e.validator(t,e);if(Object(l["e"])(s))return s.then(i);i(s)}))},isEmptyValue:function(t){return Array.isArray(t)?!t.length:!t},runSyncRule:function(t,e){return(!e.required||!this.isEmptyValue(t))&&!(e.pattern&&!e.pattern.test(t))},getRuleMessage:function(t,e){var i=e.message;return Object(l["c"])(i)?i(t,e):i},runRules:function(t){var e=this;return t.reduce((function(t,i){return t.then((function(){if(!e.validateMessage){var t=e.formValue;if(i.formatter&&(t=i.formatter(t,i)),e.runSyncRule(t,i))return i.validator?e.runValidator(t,i).then((function(s){!1===s&&(e.validateMessage=e.getRuleMessage(t,i))})):void 0;e.validateMessage=e.getRuleMessage(t,i)}}))}),Promise.resolve())},validate:function(t){var e=this;return void 0===t&&(t=this.rules),new Promise((function(i){t||i(),e.runRules(t).then((function(){e.validateMessage?i({name:e.name,message:e.validateMessage}):i()}))}))},validateWithTrigger:function(t){if(this.vanForm&&this.rules){var e=this.vanForm.validateTrigger===t,i=this.rules.filter((function(i){return i.trigger?i.trigger===t:e}));this.validate(i)}},resetValidation:function(){this.validateMessage&&(this.validateMessage="")},format:function(t){if(void 0===t&&(t=this.$refs.input),t){var e=t,i=e.value,s=this.maxlength;if(Object(l["b"])(s)&&i.length>s&&(i=i.slice(0,s),t.value=i),"number"===this.type||"digit"===this.type){var n=i,r="number"===this.type;i=Object(o["a"])(i,r),i!==n&&(t.value=i)}if(this.formatter){var a=i;i=this.formatter(i),i!==a&&(t.value=i)}return i}},onInput:function(t){t.target.composing||this.$emit("input",this.format(t.target))},onFocus:function(t){this.focused=!0,this.$emit("focus",t),this.readonly&&this.blur()},onBlur:function(t){this.focused=!1,this.$emit("blur",t),this.validateWithTrigger("onBlur"),Object(u["a"])()},onClick:function(t){this.$emit("click",t)},onClickInput:function(t){this.$emit("click-input",t)},onClickLeftIcon:function(t){this.$emit("click-left-icon",t)},onClickRightIcon:function(t){this.$emit("click-right-icon",t)},onClear:function(t){Object(a["c"])(t),this.$emit("input",""),this.$emit("clear",t)},onKeypress:function(t){var e=13;if(t.keyCode===e){var i=this.getProp("submitOnEnter");i||"textarea"===this.type||Object(a["c"])(t),"search"===this.type&&this.blur()}this.$emit("keypress",t)},adjustSize:function(){var t=this.$refs.input;if("textarea"===this.type&&this.autosize&&t){t.style.height="auto";var e=t.scrollHeight;if(Object(l["d"])(this.autosize)){var i=this.autosize,s=i.maxHeight,n=i.minHeight;s&&(e=Math.min(e,s)),n&&(e=Math.max(e,n))}e&&(t.style.height=e+"px")}},genInput:function(){var t=this.$createElement,e=this.type,i=this.slots("input"),s=this.getProp("inputAlign");if(i)return t("div",{class:v("control",[s,"custom"]),on:{click:this.onClickInput}},[i]);var a={ref:"input",class:v("control",s),domProps:{value:this.value},attrs:Object(r["a"])(Object(r["a"])({},this.$attrs),{},{name:this.name,disabled:this.disabled,readonly:this.readonly,placeholder:this.placeholder}),on:this.listeners,directives:[{name:"model",value:this.value}]};if("textarea"===e)return t("textarea",n()([{},a]));var o,u=e;return"number"===e&&(u="text",o="decimal"),"digit"===e&&(u="tel",o="numeric"),t("input",n()([{attrs:{type:u,inputmode:o}},a]))},genLeftIcon:function(){var t=this.$createElement,e=this.slots("left-icon")||this.leftIcon;if(e)return t("div",{class:v("left-icon"),on:{click:this.onClickLeftIcon}},[this.slots("left-icon")||t(h["a"],{attrs:{name:this.leftIcon,classPrefix:this.iconPrefix}})])},genRightIcon:function(){var t=this.$createElement,e=this.slots,i=e("right-icon")||this.rightIcon;if(i)return t("div",{class:v("right-icon"),on:{click:this.onClickRightIcon}},[e("right-icon")||t(h["a"],{attrs:{name:this.rightIcon,classPrefix:this.iconPrefix}})])},genWordLimit:function(){var t=this.$createElement;if(this.showWordLimit&&this.maxlength){var e=this.value.length,i=e>=this.maxlength;return t("div",{class:v("word-limit")},[t("span",{class:v("word-num",{full:i})},[e]),"/",this.maxlength])}},genMessage:function(){var t=this.$createElement;if(!this.vanForm||!1!==this.vanForm.showErrorMessage){var e=this.errorMessage||this.validateMessage;if(e){var i=this.getProp("errorMessageAlign");return t("div",{class:v("error-message",i)},[e])}}},getProp:function(t){return Object(l["b"])(this[t])?this[t]:this.vanForm&&Object(l["b"])(this.vanForm[t])?this.vanForm[t]:void 0},genLabel:function(){var t=this.$createElement,e=this.getProp("colon")?":":"";return this.slots("label")?[this.slots("label"),e]:this.label?t("span",[this.label+e]):void 0}},render:function(){var t,e=arguments[0],i=this.slots,s=this.getProp("labelAlign"),n={icon:this.genLeftIcon},r=this.genLabel();r&&(n.title=function(){return r});var a=this.slots("extra");return a&&(n.extra=function(){return a}),e(p["a"],{attrs:{icon:this.leftIcon,size:this.size,center:this.center,border:this.border,isLink:this.isLink,required:this.required,clickable:this.clickable,titleStyle:this.labelStyle,valueClass:v("value"),titleClass:[v("label",s),this.labelClass],arrowDirection:this.arrowDirection},scopedSlots:n,class:v((t={error:this.showError},t["label-"+s]=s,t["min-height"]="textarea"===this.type&&!this.autosize,t)),on:{click:this.onClick}},[e("div",{class:v("body")},[this.genInput(),this.showClear&&e(h["a"],{attrs:{name:"clear"},class:v("clear"),on:{touchstart:this.onClear}}),this.genRightIcon(),i("button")&&e("div",{class:v("button")},[i("button")])]),this.genWordLimit(),this.genMessage()])}})},"5add":function(t,e,i){var s=i("2eaa"),n=i("100e"),r=i("dcbe"),a=n((function(t,e){return r(t)?s(t,e):[]}));t.exports=a},7844:function(t,e,i){"use strict";i("68ef"),i("8270")},"7b0a":function(t,e,i){},"7de7":function(t,e,i){},"80ee":function(t,e,i){},"81e6":function(t,e,i){"use strict";i("68ef"),i("7b0a")},"96f3":function(t,e){var i=Object.prototype,s=i.hasOwnProperty;function n(t,e){return null!=t&&s.call(t,e)}t.exports=n},9796:function(t,e,i){"use strict";var s=i("201a"),n=i.n(s);n.a},"9ffb":function(t,e,i){"use strict";var s=i("d282"),n=i("9884"),r=Object(s["a"])("col"),a=r[0],o=r[1];e["a"]=a({mixins:[Object(n["a"])("vanRow")],props:{span:[Number,String],offset:[Number,String],tag:{type:String,default:"div"}},computed:{style:function(){var t=this.index,e=this.parent||{},i=e.spaces;if(i&&i[t]){var s=i[t],n=s.left,r=s.right;return{paddingLeft:n?n+"px":null,paddingRight:r?r+"px":null}}}},methods:{onClick:function(t){this.$emit("click",t)}},render:function(){var t,e=arguments[0],i=this.span,s=this.offset;return e(this.tag,{style:this.style,class:o((t={},t[i]=i,t["offset-"+s]=s,t)),on:{click:this.onClick}},[this.slots()])}})},a0a9:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"item_detail"},[i("van-swipe",{attrs:{autoplay:3e3}},t._l(t.goods.info.gallery,(function(t,e){return i("van-swipe-item",{key:e},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"image"}],attrs:{width:"100%"}})])})),1),t.goods?i("van-cell-group",{staticClass:"item_cell_group"},[i("van-cell",{staticClass:"item_info"},[i("div",[i("span",{staticClass:"item_price"},[t._v(t._s(0==t.activityId?t.goods.litemallOrderGoods&&t.goods.litemallOrderGoods.second_hand_price:t.goods.info.retailPrice))]),i("span",{staticClass:"item_market_price"},[t._v(t._s(t._f("yuan")(100*t.goods.info.counterPrice)))])]),i("div",{staticClass:"item-title"},[t._v("\n        "+t._s(t.goods.info.name)+"\n      ")]),i("div",{staticClass:"item_intro"},[t._v(t._s(t.goods.info.brief))]),0==t.activityId?i("div",{staticClass:"used-div"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.goods.litemallOrderGoods&&t.goods.litemallOrderGoods.user_head_img,expression:"goods.litemallOrderGoods&&goods.litemallOrderGoods.user_head_img"}],attrs:{alt:""}}),i("p",[t._v(t._s(t.goods.litemallOrderGoods&&t.goods.litemallOrderGoods.nickNmae))])]):t._e(),1==t.activityId?i("div",{staticClass:"activity-time"},[t._v("\n        距离活动结束"),i("span",[t._v(t._s(t.listTimeLimittime.d)+":"+t._s(t.listTimeLimittime.h)+":"+t._s(t.listTimeLimittime.m)+":"+t._s(t.listTimeLimittime.s))])]):t._e(),2==t.activityId?i("div",{staticClass:"activity-time"},[t._v("\n        距离活动开始"),i("span",[t._v(t._s(t.listPreSaletime.d)+":"+t._s(t.listPreSaletime.h)+":"+t._s(t.listPreSaletime.m)+":"+t._s(t.listPreSaletime.s))])]):t._e()])],1):t._e(),t.activitystatus?i("div",{staticClass:"item_cell_group"},[i("van-cell-group",[i("van-cell",{attrs:{title:"规格",isLink:"",value:"请选择"},nativeOn:{click:function(e){return t.skuClick(e)}}}),i("van-cell",{attrs:{title:"属性",isLink:""},nativeOn:{click:function(e){t.propsPopup=!0}}})],1),i("van-sku",{attrs:{sku:t.sku,"hide-stock":!1,"close-on-click-overlay":!0,goods:t.skuGoods,goodsId:t.goods.info.id,"show-add-cart-btn":!1,quota:1,"hide-quota-text":!0,"hide-selected-text":!1,disabled:""},on:{"buy-clicked":t.buyGoods},model:{value:t.showSku,callback:function(e){t.showSku=e},expression:"showSku"}}),i("van-popup",{attrs:{position:"bottom"},model:{value:t.propsPopup,callback:function(e){t.propsPopup=e},expression:"propsPopup"}},[i("popup-props",{attrs:{propsStr:t.props_str}})],1)],1):t._e(),i("div",{staticClass:"item_desc"},[i("div",{staticClass:"item_desc_title"},[t._v("商品详情")]),t.goods.info.detail?i("div",{staticClass:"item_desc_wrap",domProps:{innerHTML:t._s(t.goods.info.detail)}}):i("div",{staticClass:"item_desc_wrap",staticStyle:{"text-align":"center"}},[i("p",[t._v("无详情")])])]),i("van-goods-action",[!t.btnStatus&&2==t.activityId||1==t.goods.isSelfShop?i("van-goods-action-button",{staticClass:"gray",attrs:{text:"立即购买"}}):0==t.activityId?i("van-goods-action-button",{attrs:{type:"danger",text:"立即购买"},on:{click:function(e){return t.buyGoods(t.goods)}}}):i("van-goods-action-button",{attrs:{type:"danger",text:"立即购买"},on:{click:t.skuClick}})],1)],1)},n=[],r=(i("8e6e"),i("ac6a"),i("456d"),i("68ef"),i("9d70"),i("3743"),i("80ee"),i("c31d")),a=i("d282"),o=i("a142"),u=i("48f4"),c=i("9884"),l=i("6f2f"),d=i("ad06"),h=Object(a["a"])("goods-action-icon"),p=h[0],f=h[1],m=p({mixins:[Object(c["a"])("vanGoodsAction")],props:Object(r["a"])(Object(r["a"])({},u["c"]),{},{dot:Boolean,text:String,icon:String,color:String,info:[Number,String],badge:[Number,String],iconClass:null}),methods:{onClick:function(t){this.$emit("click",t),Object(u["b"])(this.$router,this)},genIcon:function(){var t=this.$createElement,e=this.slots("icon"),i=Object(o["b"])(this.badge)?this.badge:this.info;return e?t("div",{class:f("icon")},[e,t(l["a"],{attrs:{dot:this.dot,info:i}})]):t(d["a"],{class:[f("icon"),this.iconClass],attrs:{tag:"div",dot:this.dot,info:i,name:this.icon,color:this.color}})}},render:function(){var t=arguments[0];return t("div",{attrs:{role:"button",tabindex:"0"},class:f(),on:{click:this.onClick}},[this.genIcon(),this.slots()||this.text])}}),g=(i("e3b3"),i("bc1b"),i("1175"),i("b650")),v=Object(a["a"])("goods-action-button"),k=v[0],b=v[1],S=k({mixins:[Object(c["a"])("vanGoodsAction")],props:Object(r["a"])(Object(r["a"])({},u["c"]),{},{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean}),computed:{isFirst:function(){var t=this.parent&&this.parent.children[this.index-1];return!t||t.$options.name!==this.$options.name},isLast:function(){var t=this.parent&&this.parent.children[this.index+1];return!t||t.$options.name!==this.$options.name}},methods:{onClick:function(t){this.$emit("click",t),Object(u["b"])(this.$router,this)}},render:function(){var t=arguments[0];return t(g["a"],{class:b([{first:this.isFirst,last:this.isLast},this.type]),attrs:{square:!0,size:"large",type:this.type,icon:this.icon,color:this.color,loading:this.loading,disabled:this.disabled},on:{click:this.onClick}},[this.slots()||this.text])}}),O=(i("4cf9"),Object(a["a"])("goods-action")),y=O[0],x=O[1],j=y({mixins:[Object(c["b"])("vanGoodsAction")],props:{safeAreaInsetBottom:{type:Boolean,default:!0}},render:function(){var t=arguments[0];return t("div",{class:x({unfit:!this.safeAreaInsetBottom})},[this.slots()])}}),C=(i("a71a"),i("09fe"),i("1a04"),i("1146"),i("4d75"),i("b258"),i("8270"),i("786d"),i("504b"),i("bcd3"),i("fb6c"),i("d10a"),{"zh-CN":{vanSku:{select:"选择",selected:"已选",selectSku:"请先选择商品规格",soldout:"库存不足",originPrice:"原价",minusTip:"至少选择一件",minusStartTip:function(t){return t+"件起售"},unavailable:"商品已经无法购买啦",stock:"剩余",stockUnit:"件",quotaTip:function(t){return"每人限购"+t+"件"},quotaUsedTip:function(t,e){return"每人限购"+t+"件，你已购买"+e+"件"}},vanSkuActions:{buy:"立即购买",addCart:"加入购物车"},vanSkuImgUploader:{oversize:function(t){return"最大可上传图片为"+t+"MB，请尝试压缩图片尺寸"},fail:"上传失败<br />重新上传"},vanSkuStepper:{quotaLimit:function(t){return"限购"+t+"件"},quotaStart:function(t){return t+"件起售"},comma:"，",num:"购买数量"},vanSkuMessages:{fill:"请填写",upload:"请上传",imageLabel:"仅限一张",invalid:{tel:"请填写正确的数字格式留言",mobile:"手机号长度为6-20位数字",email:"请填写正确的邮箱",id_no:"请填写正确的身份证号码"},placeholder:{id_no:"输入身份证号码",text:"输入文本",tel:"输入数字",email:"输入邮箱",date:"点击选择日期",time:"点击选择时间",textarea:"点击填写段落文本",mobile:"输入手机号码"}},vanSkuRow:{multiple:"可多选"}}}),_={QUOTA_LIMIT:0,STOCK_LIMIT:1},w="",F={LIMIT_TYPE:_,UNSELECTED_SKU_VALUE_ID:w},I=function(t){var e={};return t.forEach((function(t){e[t.k_s]=t.v})),e},T=function(t){var e={};return t.forEach((function(t){var i={};t.v.forEach((function(t){i[t.id]=t})),e[t.k_id]=i})),e},$=function(t,e){var i=Object.keys(e).filter((function(t){return e[t]!==w}));return t.length===i.length},L=function(t,e){var i=t.filter((function(t){return Object.keys(e).every((function(i){return String(t[i])===String(e[i])}))}));return i[0]},P=function(t,e){var i=I(t);return Object.keys(e).reduce((function(t,s){var n=i[s],r=e[s];if(r!==w){var a=n.filter((function(t){return t.id===r}))[0];a&&t.push(a)}return t}),[])},N=function(t,e,i){var s,n=i.key,a=i.valueId,o=Object(r["a"])(Object(r["a"])({},e),{},(s={},s[n]=a,s)),u=Object.keys(o).filter((function(t){return o[t]!==w})),c=t.filter((function(t){return u.every((function(e){return String(o[e])===String(t[e])}))})),l=c.reduce((function(t,e){return t+=e.stock_num,t}),0);return l>0},E=function(t,e){var i=T(t);return Object.keys(e).reduce((function(t,s){return e[s].forEach((function(e){t.push(Object(r["a"])({},i[s][e]))})),t}),[])},B=function(t,e){var i=[];return(t||[]).forEach((function(t){if(e[t.k_id]&&e[t.k_id].length>0){var s=[];t.v.forEach((function(i){e[t.k_id].indexOf(i.id)>-1&&s.push(Object(r["a"])({},i))})),i.push(Object(r["a"])(Object(r["a"])({},t),{},{v:s}))}})),i},M={normalizeSkuTree:I,getSkuComb:L,getSelectedSkuValues:P,isAllSelected:$,isSkuChoosable:N,getSelectedPropValues:E,getSelectedProperties:B},A=i("2b0e"),V=i("e41f"),D=i("d399"),q=i("28a2"),z=i("2638"),U=i.n(z),R=i("ba31"),G=i("b1d2"),K=Object(a["a"])("sku-header"),H=K[0],Q=K[1];function W(t,e){var i;return t.tree.some((function(t){var s=e[t.k_s];if(s&&t.v){var n=t.v.filter((function(t){return t.id===s}))[0]||{};return i=n.previewImgUrl||n.imgUrl||n.img_url,i}return!1})),i}function J(t,e,i,s){var n,r=e.sku,a=e.goods,o=e.skuEventBus,u=e.selectedSku,c=W(r,u)||a.picture,l=function(){o.$emit("sku:previewImage",c)};return t("div",U()([{class:[Q(),G["b"]]},Object(R["b"])(s)]),[t("div",{class:Q("img-wrap"),on:{click:l}},[t("img",{attrs:{src:c}}),null==(n=i["sku-header-image-extra"])?void 0:n.call(i)]),t("div",{class:Q("goods-info")},[null==i.default?void 0:i.default()])])}J.props={sku:Object,goods:Object,skuEventBus:Object,selectedSku:Object};var Y=H(J),X=Object(a["a"])("sku-header-item"),Z=X[0],tt=X[1];function et(t,e,i,s){return t("div",U()([{class:tt()},Object(R["b"])(s)]),[i.default&&i.default()])}var it=Z(et),st=Object(a["a"])("sku-row"),nt=st[0],rt=st[1],at=st[2];function ot(t,e,i,s){var n=e.skuRow.is_multiple&&t("span",{class:rt("title-multiple")},["（",at("multiple"),"）"]);return t("div",U()([{class:[rt(),G["b"]]},Object(R["b"])(s)]),[t("div",{class:rt("title")},[e.skuRow.k,n]),i.default&&i.default()])}ot.props={skuRow:Object};var ut=nt(ot),ct=Object(a["a"])("sku-row-item"),lt=ct[0],dt=lt({props:{skuValue:Object,skuKeyStr:String,skuEventBus:Object,selectedSku:Object,skuList:{type:Array,default:function(){return[]}}},computed:{choosable:function(){return N(this.skuList,this.selectedSku,{key:this.skuKeyStr,valueId:this.skuValue.id})}},methods:{onSelect:function(){this.choosable&&this.skuEventBus.$emit("sku:select",Object(r["a"])(Object(r["a"])({},this.skuValue),{},{skuKeyStr:this.skuKeyStr}))}},render:function(){var t=arguments[0],e=this.skuValue.id===this.selectedSku[this.skuKeyStr],i=this.skuValue.imgUrl||this.skuValue.img_url;return t("span",{class:["van-sku-row__item",{"van-sku-row__item--active":e,"van-sku-row__item--disabled":!this.choosable}],on:{click:this.onSelect}},[i&&t("img",{class:"van-sku-row__item-img",attrs:{src:i}}),t("span",{class:"van-sku-row__item-name"},[this.skuValue.name])])}}),ht=Object(a["a"])("sku-row-prop-item"),pt=ht[0],ft=pt({props:{skuValue:Object,skuKeyStr:String,skuEventBus:Object,selectedProp:Object,multiple:Boolean},computed:{choosed:function(){var t=this.selectedProp,e=this.skuKeyStr,i=this.skuValue;return!(!t||!t[e])&&t[e].indexOf(i.id)>-1}},methods:{onSelect:function(){this.skuEventBus.$emit("sku:propSelect",Object(r["a"])(Object(r["a"])({},this.skuValue),{},{skuKeyStr:this.skuKeyStr,multiple:this.multiple}))}},render:function(){var t=arguments[0];return t("span",{class:["van-sku-row__item",{"van-sku-row__item--active":this.choosed}],on:{click:this.onSelect}},[t("span",{class:"van-sku-row__item-name"},[this.skuValue.name])])}}),mt=i("20fb"),gt=Object(a["a"])("sku-stepper"),vt=gt[0],kt=gt[2],bt=_.QUOTA_LIMIT,St=_.STOCK_LIMIT,Ot=vt({props:{stock:Number,skuEventBus:Object,skuStockNum:Number,selectedNum:Number,stepperTitle:String,disableStepperInput:Boolean,customStepperConfig:Object,hideQuotaText:Boolean,quota:{type:Number,default:0},quotaUsed:{type:Number,default:0},startSaleNum:{type:Number,default:1}},data:function(){return{currentNum:this.selectedNum,limitType:St}},watch:{currentNum:function(t){var e=parseInt(t,10);e>=this.stepperMinLimit&&e<=this.stepperLimit&&this.skuEventBus.$emit("sku:numChange",e)},stepperLimit:function(t){t<this.currentNum&&this.stepperMinLimit<=t&&(this.currentNum=t),this.checkState(this.stepperMinLimit,t)},stepperMinLimit:function(t){(t>this.currentNum||t>this.stepperLimit)&&(this.currentNum=t),this.checkState(t,this.stepperLimit)}},computed:{stepperLimit:function(){var t,e=this.quota-this.quotaUsed;return this.quota>0&&e<=this.stock?(t=e<0?0:e,this.limitType=bt):(t=this.stock,this.limitType=St),t},stepperMinLimit:function(){return this.startSaleNum<1?1:this.startSaleNum},quotaText:function(){var t=this.customStepperConfig,e=t.quotaText,i=t.hideQuotaText;if(i)return"";var s="";if(e)s=e;else{var n=[];this.startSaleNum>1&&n.push(kt("quotaStart",this.startSaleNum)),this.quota>0&&n.push(kt("quotaLimit",this.quota)),s=n.join(kt("comma"))}return s}},created:function(){this.checkState(this.stepperMinLimit,this.stepperLimit)},methods:{setCurrentNum:function(t){this.currentNum=t,this.checkState(this.stepperMinLimit,this.stepperLimit)},onOverLimit:function(t){this.skuEventBus.$emit("sku:overLimit",{action:t,limitType:this.limitType,quota:this.quota,quotaUsed:this.quotaUsed,startSaleNum:this.startSaleNum})},onChange:function(t){var e=parseInt(t,10),i=this.customStepperConfig.handleStepperChange;i&&i(e),this.$emit("change",e)},checkState:function(t,e){this.currentNum<t||t>e?this.currentNum=t:this.currentNum>e&&(this.currentNum=e),this.skuEventBus.$emit("sku:stepperState",{valid:t<=e,min:t,max:e,limitType:this.limitType,quota:this.quota,quotaUsed:this.quotaUsed,startSaleNum:this.startSaleNum})}},render:function(){var t=this,e=arguments[0];return e("div",{class:"van-sku-stepper-stock"},[e("div",{class:"van-sku__stepper-title"},[this.stepperTitle||kt("num")]),e(mt["a"],{attrs:{integer:!0,min:this.stepperMinLimit,max:this.stepperLimit,disableInput:this.disableStepperInput},class:"van-sku__stepper",on:{overlimit:this.onOverLimit,change:this.onChange},model:{value:t.currentNum,callback:function(e){t.currentNum=e}}}),!this.hideQuotaText&&this.quotaText&&e("span",{class:"van-sku__stepper-quota"},["(",this.quotaText,")"])])}});function yt(t){var e=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;return e.test(t)}var xt=i("90c6"),jt=i("7744"),Ct=i("565f"),_t=i("543e"),wt=i("8f80"),Ft=Object(a["a"])("sku-img-uploader"),It=Ft[0],Tt=Ft[1],$t=Ft[2],Lt=It({props:{value:String,uploadImg:Function,maxSize:{type:Number,default:6}},data:function(){return{paddingImg:"",uploadFail:!1}},methods:{afterReadFile:function(t){var e=this;this.paddingImg=t.content,this.uploadFail=!1,this.uploadImg(t.file,t.content).then((function(t){e.$emit("input",t),e.$nextTick((function(){e.paddingImg=""}))})).catch((function(){e.uploadFail=!0}))},onOversize:function(){this.$toast($t("oversize",this.maxSize))},genUploader:function(t,e){void 0===e&&(e=!1);var i=this.$createElement;return i(wt["a"],{class:Tt("uploader"),attrs:{disabled:e,afterRead:this.afterReadFile,maxSize:1024*this.maxSize*1024},on:{oversize:this.onOversize}},[i("div",{class:Tt("img")},[t])])},genMask:function(){var t=this.$createElement;return t("div",{class:Tt("mask")},[this.uploadFail?[t(d["a"],{attrs:{name:"warning-o",size:"20px"}}),t("div",{class:Tt("warn-text"),domProps:{innerHTML:$t("fail")}})]:t(_t["a"],{attrs:{type:"spinner",size:"20px",color:"white"}})])}},render:function(){var t=this,e=arguments[0];return e("div",{class:Tt()},[this.value&&this.genUploader([e("img",{attrs:{src:this.value}}),e(d["a"],{attrs:{name:"clear"},class:Tt("delete"),on:{click:function(){t.$emit("input","")}}})],!0),this.paddingImg&&this.genUploader([e("img",{attrs:{src:this.paddingImg}}),this.genMask()],!this.uploadFail),!this.value&&!this.paddingImg&&this.genUploader(e("div",{class:Tt("trigger")},[e(d["a"],{attrs:{name:"photograph",size:"22px"}})]))])}}),Pt=Object(a["a"])("sku-messages"),Nt=Pt[0],Et=Pt[1],Bt=Pt[2],Mt=Nt({props:{messageConfig:Object,goodsId:[Number,String],messages:{type:Array,default:function(){return[]}}},data:function(){return{messageValues:this.resetMessageValues(this.messages)}},watch:{messages:function(t){this.messageValues=this.resetMessageValues(t)}},methods:{resetMessageValues:function(t){var e=this.messageConfig,i=e.initialMessages,s=void 0===i?{}:i;return(t||[]).map((function(t){return{value:s[t.name]||""}}))},getType:function(t){return 1===+t.multiple?"textarea":"id_no"===t.type?"text":t.datetime>0?"datetime-local":t.type},getMessages:function(){var t=this,e={};return this.messageValues.forEach((function(i,s){var n=i.value;t.messages[s].datetime>0&&(n=n.replace(/T/g," ")),e["message_"+s]=n})),e},getCartMessages:function(){var t=this,e={};return this.messageValues.forEach((function(i,s){var n=i.value,r=t.messages[s];r.datetime>0&&(n=n.replace(/T/g," ")),e[r.name]=n})),e},getPlaceholder:function(t){var e=1===+t.multiple?"textarea":t.type,i=this.messageConfig.placeholderMap||{};return t.placeholder||i[e]||Bt("placeholder."+e)},validateMessages:function(){for(var t=this.messageValues,e=0;e<t.length;e++){var i=t[e].value,s=this.messages[e];if(""===i){if("1"===String(s.required)){var n=Bt("image"===s.type?"upload":"fill");return n+s.name}}else{if("tel"===s.type&&!Object(xt["b"])(i))return Bt("invalid.tel");if("mobile"===s.type&&!/^\d{6,20}$/.test(i))return Bt("invalid.mobile");if("email"===s.type&&!yt(i))return Bt("invalid.email");if("id_no"===s.type&&(i.length<15||i.length>18))return Bt("invalid.id_no")}}},genMessage:function(t,e){var i=this,s=this.$createElement;return"image"===t.type?s(jt["a"],{key:this.goodsId+"-"+e,attrs:{title:t.name,label:Bt("imageLabel"),required:"1"===String(t.required),valueClass:Et("image-cell-value")},class:Et("image-cell")},[s(Lt,{attrs:{maxSize:this.messageConfig.uploadMaxSize,uploadImg:this.messageConfig.uploadImg},model:{value:i.messageValues[e].value,callback:function(t){i.$set(i.messageValues[e],"value",t)}}})]):s(Ct["a"],{attrs:{maxlength:"200",label:t.name,required:"1"===String(t.required),placeholder:this.getPlaceholder(t),type:this.getType(t)},key:this.goodsId+"-"+e,model:{value:i.messageValues[e].value,callback:function(t){i.$set(i.messageValues[e],"value",t)}}})}},render:function(){var t=arguments[0];return t("div",{class:Et()},[this.messages.map(this.genMessage)])}}),At=Object(a["a"])("sku-actions"),Vt=At[0],Dt=At[1],qt=At[2];function zt(t,e,i,s){var n=function(t){return function(){e.skuEventBus.$emit(t)}};return t("div",U()([{class:Dt()},Object(R["b"])(s)]),[e.showAddCartBtn&&t(g["a"],{attrs:{size:"large",type:"warning",text:e.addCartText||qt("addCart")},on:{click:n("sku:addCart")}}),t(g["a"],{attrs:{size:"large",type:"danger",text:e.buyText||qt("buy")},on:{click:n("sku:buy")}})])}zt.props={buyText:String,addCartText:String,skuEventBus:Object,showAddCartBtn:Boolean};var Ut=Vt(zt),Rt=Object(a["a"])("sku"),Gt=Rt[0],Kt=Rt[1],Ht=Rt[2],Qt=_.QUOTA_LIMIT,Wt=Gt({props:{sku:Object,priceTag:String,goods:Object,value:Boolean,buyText:String,goodsId:[Number,String],hideStock:Boolean,addCartText:String,stepperTitle:String,getContainer:[String,Function],hideQuotaText:Boolean,hideSelectedText:Boolean,resetStepperOnHide:Boolean,customSkuValidator:Function,closeOnClickOverlay:Boolean,disableStepperInput:Boolean,resetSelectedSkuOnHide:Boolean,properties:Array,quota:{type:Number,default:0},quotaUsed:{type:Number,default:0},startSaleNum:{type:Number,default:1},initialSku:{type:Object,default:function(){return{}}},stockThreshold:{type:Number,default:50},showSoldoutSku:{type:Boolean,default:!0},showAddCartBtn:{type:Boolean,default:!0},bodyOffsetTop:{type:Number,default:200},messageConfig:{type:Object,default:function(){return{initialMessages:{},placeholderMap:{},uploadImg:function(){return Promise.resolve()},uploadMaxSize:5}}},customStepperConfig:{type:Object,default:function(){return{}}},previewOnClickImage:{type:Boolean,default:!0},safeAreaInsetBottom:{type:Boolean,default:!0}},data:function(){return{selectedSku:{},selectedProp:{},selectedNum:1,show:this.value}},watch:{show:function(t){this.$emit("input",t),t||(this.$emit("sku-close",{selectedSkuValues:this.selectedSkuValues,selectedNum:this.selectedNum,selectedSkuComb:this.selectedSkuComb}),this.resetStepperOnHide&&this.resetStepper(),this.resetSelectedSkuOnHide&&this.resetSelectedSku())},value:function(t){this.show=t},skuTree:"resetSelectedSku",initialSku:function(){this.resetStepper(),this.resetSelectedSku()}},computed:{skuGroupClass:function(){return["van-sku-group-container",{"van-sku-group-container--hide-soldout":!this.showSoldoutSku}]},bodyStyle:function(){if(!this.$isServer){var t=window.innerHeight-this.bodyOffsetTop;return{maxHeight:t+"px"}}},isSkuCombSelected:function(){var t=this;return!(this.hasSku&&!$(this.skuTree,this.selectedSku))&&!this.propList.some((function(e){return(t.selectedProp[e.k_id]||[]).length<1}))},isSkuEmpty:function(){return 0===Object.keys(this.sku).length},hasSku:function(){return!this.sku.none_sku},hasSkuOrAttr:function(){return this.hasSku||this.propList.length>0},selectedSkuComb:function(){var t=null;return this.isSkuCombSelected&&(t=this.hasSku?L(this.sku.list,this.selectedSku):{id:this.sku.collection_id,price:Math.round(100*this.sku.price),stock_num:this.sku.stock_num},t&&(t.properties=B(this.propList,this.selectedProp),t.property_price=this.selectedPropValues.reduce((function(t,e){return t+(e.price||0)}),0))),t},selectedSkuValues:function(){return P(this.skuTree,this.selectedSku)},selectedPropValues:function(){return E(this.propList,this.selectedProp)},price:function(){return this.selectedSkuComb?((this.selectedSkuComb.price+this.selectedSkuComb.property_price)/100).toFixed(2):this.sku.price},originPrice:function(){return this.selectedSkuComb&&this.selectedSkuComb.origin_price?((this.selectedSkuComb.origin_price+this.selectedSkuComb.property_price)/100).toFixed(2):this.sku.origin_price},skuTree:function(){return this.sku.tree||[]},propList:function(){return this.properties||[]},imageList:function(){var t=[this.goods.picture];return this.skuTree.length>0&&this.skuTree.forEach((function(e){e.v&&e.v.forEach((function(e){var i=e.previewImgUrl||e.imgUrl||e.img_url;i&&t.push(i)}))})),t},stock:function(){var t=this.customStepperConfig.stockNum;return void 0!==t?t:this.selectedSkuComb?this.selectedSkuComb.stock_num:this.sku.stock_num},stockText:function(){var t=this.$createElement,e=this.customStepperConfig.stockFormatter;return e?e(this.stock):[Ht("stock")+" ",t("span",{class:Kt("stock-num",{highlight:this.stock<this.stockThreshold})},[this.stock])," "+Ht("stockUnit")]},selectedText:function(){var t=this;if(this.selectedSkuComb){var e=this.selectedSkuValues.concat(this.selectedPropValues);return Ht("selected")+" "+e.map((function(t){return t.name})).join("；")}var i=this.skuTree.filter((function(e){return t.selectedSku[e.k_s]===w})).map((function(t){return t.k})),s=this.propList.filter((function(e){return(t.selectedProp[e.k_id]||[]).length<1})).map((function(t){return t.k}));return Ht("select")+" "+i.concat(s).join("；")}},created:function(){var t=new A["a"];this.skuEventBus=t,t.$on("sku:select",this.onSelect),t.$on("sku:propSelect",this.onPropSelect),t.$on("sku:numChange",this.onNumChange),t.$on("sku:previewImage",this.onPreviewImage),t.$on("sku:overLimit",this.onOverLimit),t.$on("sku:stepperState",this.onStepperState),t.$on("sku:addCart",this.onAddCart),t.$on("sku:buy",this.onBuy),this.resetStepper(),this.resetSelectedSku(),this.$emit("after-sku-create",t)},methods:{resetStepper:function(){var t=this.$refs.skuStepper,e=this.initialSku.selectedNum,i=Object(o["b"])(e)?e:this.startSaleNum;this.stepperError=null,t?t.setCurrentNum(i):this.selectedNum=i},resetSelectedSku:function(){var t=this;this.selectedSku={},this.skuTree.forEach((function(e){t.selectedSku[e.k_s]=t.initialSku[e.k_s]||w})),this.skuTree.forEach((function(e){var i=e.k_s,s=e.v[0].id;1===e.v.length&&N(t.sku.list,t.selectedSku,{key:i,valueId:s})&&(t.selectedSku[i]=s)}));var e=this.selectedSkuValues;e.length>0&&this.$nextTick((function(){t.$emit("sku-selected",{skuValue:e[e.length-1],selectedSku:t.selectedSku,selectedSkuComb:t.selectedSkuComb})})),this.selectedProp={};var i=this.initialSku.selectedProp,s=void 0===i?{}:i;this.propList.forEach((function(e){e.v&&1===e.v.length?t.selectedProp[e.k_id]=[e.v[0].id]:s[e.k_id]&&(t.selectedProp[e.k_id]=s[e.k_id])}));var n=this.selectedPropValues;n.length>0&&this.$emit("sku-prop-selected",{propValue:n[n.length-1],selectedProp:this.selectedProp,selectedSkuComb:this.selectedSkuComb}),this.$emit("sku-reset",{selectedSku:this.selectedSku,selectedProp:this.selectedProp,selectedSkuComb:this.selectedSkuComb})},getSkuMessages:function(){return this.$refs.skuMessages?this.$refs.skuMessages.getMessages():{}},getSkuCartMessages:function(){return this.$refs.skuMessages?this.$refs.skuMessages.getCartMessages():{}},validateSkuMessages:function(){return this.$refs.skuMessages?this.$refs.skuMessages.validateMessages():""},validateSku:function(){if(0===this.selectedNum)return Ht("unavailable");if(this.isSkuCombSelected)return this.validateSkuMessages();if(this.customSkuValidator){var t=this.customSkuValidator(this);if(t)return t}return Ht("selectSku")},onSelect:function(t){var e,i;this.selectedSku=this.selectedSku[t.skuKeyStr]===t.id?Object(r["a"])(Object(r["a"])({},this.selectedSku),{},(e={},e[t.skuKeyStr]=w,e)):Object(r["a"])(Object(r["a"])({},this.selectedSku),{},(i={},i[t.skuKeyStr]=t.id,i)),this.$emit("sku-selected",{skuValue:t,selectedSku:this.selectedSku,selectedSkuComb:this.selectedSkuComb})},onPropSelect:function(t){var e,i=this.selectedProp[t.skuKeyStr]||[],s=i.indexOf(t.id);s>-1?i.splice(s,1):t.multiple?i.push(t.id):i.splice(0,1,t.id),this.selectedProp=Object(r["a"])(Object(r["a"])({},this.selectedProp),{},(e={},e[t.skuKeyStr]=i,e)),this.$emit("sku-prop-selected",{propValue:t,selectedProp:this.selectedProp,selectedSkuComb:this.selectedSkuComb})},onNumChange:function(t){this.selectedNum=t},onPreviewImage:function(t){var e=this,i=this.previewOnClickImage,s=this.imageList.findIndex((function(e){return e===t})),n={index:s,imageList:this.imageList,indexImage:t};this.$emit("open-preview",n),i&&Object(q["a"])({images:this.imageList,startPosition:s,closeOnPopstate:!0,onClose:function(){e.$emit("close-preview",n)}})},onOverLimit:function(t){var e=t.action,i=t.limitType,s=t.quota,n=t.quotaUsed,r=this.customStepperConfig.handleOverLimit;r?r(t):"minus"===e?this.startSaleNum>1?Object(D["a"])(Ht("minusStartTip",this.startSaleNum)):Object(D["a"])(Ht("minusTip")):"plus"===e&&(i===Qt?n>0?Object(D["a"])(Ht("quotaUsedTip",s,n)):Object(D["a"])(Ht("quotaTip",s)):Object(D["a"])(Ht("soldout")))},onStepperState:function(t){t.valid?this.stepperError=null:this.stepperError=Object(r["a"])(Object(r["a"])({},t),{},{action:"plus"})},onAddCart:function(){this.onBuyOrAddCart("add-cart")},onBuy:function(){this.onBuyOrAddCart("buy-clicked")},onBuyOrAddCart:function(t){if(this.stepperError)return this.onOverLimit(this.stepperError);var e=this.validateSku();e?Object(D["a"])(e):this.$emit(t,this.getSkuData())},getSkuData:function(){return{goodsId:this.goodsId,selectedNum:this.selectedNum,selectedSkuComb:this.selectedSkuComb,messages:this.getSkuMessages(),cartMessages:this.getSkuCartMessages()}}},render:function(){var t=this,e=arguments[0];if(!this.isSkuEmpty){var i=this.sku,s=this.goods,n=this.price,r=this.originPrice,a=this.skuEventBus,o=this.selectedSku,u=this.selectedProp,c=this.selectedNum,l=this.stepperTitle,d=this.selectedSkuComb,h={price:n,originPrice:r,selectedNum:c,skuEventBus:a,selectedSku:o,selectedSkuComb:d},p=function(e){return t.slots(e,h)},f=p("sku-header")||e(Y,{attrs:{sku:i,goods:s,skuEventBus:a,selectedSku:o}},[e("template",{slot:"sku-header-image-extra"},[p("sku-header-image-extra")]),p("sku-header-price")||e("div",{class:"van-sku__goods-price"},[e("span",{class:"van-sku__price-symbol"},["￥"]),e("span",{class:"van-sku__price-num"},[n]),this.priceTag&&e("span",{class:"van-sku__price-tag"},[this.priceTag])]),p("sku-header-origin-price")||r&&e(it,[Ht("originPrice")," ￥",r]),!this.hideStock&&e(it,[e("span",{class:"van-sku__stock"},[this.stockText])]),this.hasSkuOrAttr&&!this.hideSelectedText&&e(it,[this.selectedText]),p("sku-header-extra")]),m=p("sku-group")||this.hasSkuOrAttr&&e("div",{class:this.skuGroupClass},[this.skuTree.map((function(t){return e(ut,{attrs:{skuRow:t}},[t.v.map((function(s){return e(dt,{attrs:{skuList:i.list,skuValue:s,selectedSku:o,skuEventBus:a,skuKeyStr:t.k_s}})}))])})),this.propList.map((function(t){return e(ut,{attrs:{skuRow:t}},[t.v.map((function(i){return e(ft,{attrs:{skuValue:i,skuKeyStr:t.k_id+"",selectedProp:u,skuEventBus:a,multiple:t.is_multiple}})}))])}))]),g=p("sku-stepper")||e(Ot,{ref:"skuStepper",attrs:{stock:this.stock,quota:this.quota,quotaUsed:this.quotaUsed,startSaleNum:this.startSaleNum,skuEventBus:a,selectedNum:c,stepperTitle:l,skuStockNum:i.stock_num,disableStepperInput:this.disableStepperInput,customStepperConfig:this.customStepperConfig,hideQuotaText:this.hideQuotaText},on:{change:function(e){t.$emit("stepper-change",e)}}}),v=p("sku-messages")||e(Mt,{ref:"skuMessages",attrs:{goodsId:this.goodsId,messageConfig:this.messageConfig,messages:i.messages}}),k=p("sku-actions")||e(Ut,{attrs:{buyText:this.buyText,skuEventBus:a,addCartText:this.addCartText,showAddCartBtn:this.showAddCartBtn}});return e(V["a"],{attrs:{round:!0,closeable:!0,position:"bottom",getContainer:this.getContainer,closeOnClickOverlay:this.closeOnClickOverlay,safeAreaInsetBottom:this.safeAreaInsetBottom},class:"van-sku-container",model:{value:t.show,callback:function(e){t.show=e}}},[f,e("div",{class:"van-sku-body",style:this.bodyStyle},[p("sku-body-top"),m,p("extra-sku-group"),g,v]),p("sku-actions-top"),k])}}}),Jt=i("3c69");Jt["a"].add(C),Wt.SkuActions=Ut,Wt.SkuHeader=Y,Wt.SkuHeaderItem=it,Wt.SkuMessages=Mt,Wt.SkuStepper=Ot,Wt.SkuRow=ut,Wt.SkuRowItem=dt,Wt.SkuRowPropItem=ft,Wt.skuHelper=M,Wt.skuConstants=F;var Yt,Xt,Zt=Wt,te=(i("4b0a"),i("2bb1")),ee=(i("7844"),i("5596")),ie=(i("8a58"),i("7f7f"),i("bd86")),se=(i("c5f6"),i("3852")),ne=i.n(se),re=i("5add"),ae=i.n(re),oe=i("c641"),ue=i.n(oe),ce=i("4ec3"),le=i("dad1"),de=i("3c96"),he=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"popup_wrap"},[i("van-icon",{staticClass:"cancel_popup",attrs:{name:"clear"},nativeOn:{click:function(e){t.$parent.value=!1}}}),i("div",{staticClass:"popup_header"}),i("div",{staticClass:"popup_content"},[i("van-cell-group",t._l(t.propsStr,(function(e,s){return i("van-cell",{key:s},[i("van-row",[i("van-col",{attrs:{span:"8"}},[t._v(t._s(e[0]))]),i("van-col",{attrs:{span:"16"}},[t._v(t._s(e[1]))])],1)],1)})),1)],1)],1)},pe=[],fe=(i("4d48"),i("d1e1")),me=(i("81e6"),i("9ffb")),ge={name:"popup-props",props:{propsStr:{type:Array,default:function(){return[]}}},components:(Yt={},Object(ie["a"])(Yt,me["a"].name,me["a"]),Object(ie["a"])(Yt,fe["a"].name,fe["a"]),Yt)},ve=ge,ke=(i("311e"),i("2877")),be=Object(ke["a"])(ve,he,pe,!1,null,"a1bfa004",null),Se=be.exports;function Oe(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function ye(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Oe(Object(i),!0).forEach((function(e){Object(ie["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Oe(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var xe={props:{itemId:[String,Number],activityId:[String,Number]},data:function(){var t=!!localStorage.getItem("Authorization");return{isLogin:t,goods:{userHasCollect:0,info:{gallery:[]}},sku:{tree:[],list:[],price:"1.00"},listTimeLimittime:{d:"00",h:"00",m:"00",s:"00"},listPreSaletime:{d:"00",h:"00",m:"00",s:"00"},btnStatus:!1,activitystatus:!0,skuGoods:{title:"",picture:""},selectSku:{selectedNum:1,selectedSkuComb:{sku_str:"aa"}},propsPopup:!1,showSku:!1}},computed:{props_str:function(){var t=[];return ue()(this.goods.attribute,(function(e){t.push([e["attribute"],e["value"]])})),t||[]}},created:function(){this.initData(),0==this.activityId&&(this.activitystatus=!1),this.btnStatus||2!=this.activityId||(this.activitystatus=!1)},methods:{skuClick:function(){this.showSku=!0},initData:function(){var t=this;0==this.activityId?Object(le["c"])({id:this.itemId}).then((function(e){t.goods=e.data.data,t.skuAdapter()})):Object(ce["D"])({id:this.itemId}).then((function(e){if(t.goods=e.data.data,t.skuAdapter(),1==t.activityId&&localStorage.setItem("grouponRulesId",t.goods.groupon[0].id),t.goods.groupon.length>0)if(1==t.activityId){var i=t.goods.groupon[0].expireTime;Object(de["a"])({data:t,type:3,name:"listTimeLimittime",now:t.goods.currentTime,time:i})}else{var s=t.goods.groupon[0].startTime;Object(de["a"])({data:t,type:3,name:"listPreSaletime",now:t.goods.currentTime,time:s,callback:function(e){e.timestamp<=0&&(t.btnStatus=!0)}})}}))},toCart:function(){this.$router.push({name:"cart"})},addCollect:function(){var t=this;Object(ce["w"])({valueId:this.itemId,type:0}).then((function(e){1===t.goods.userHasCollect?t.goods.userHasCollect=0:(t.goods.userHasCollect=1,t.$toast({message:"收藏成功",duration:1500}))}))},getProductId:function(t,e){var i,s,n;return ue()(this.goods.specificationList,(function(i){ue()(i.valueList,(function(i){i.id===t?s=i.value:i.id===e&&(n=i.value)}))})),ue()(this.goods.productList,(function(t){var e=ae()(t.specifications,s,n);0===e.length&&(i=t.id)})),i},getProductIdByOne:function(t){var e,i;return ue()(this.goods.specificationList,(function(e){ue()(e.valueList,(function(e){e.id!==t||(i=e.value)}))})),ue()(this.goods.productList,(function(t){var s=ae()(t.specifications,i);0===s.length&&(e=t.id)})),e},buyGoods:function(t){var e=this,i=this,s={goodsId:t.goodsId,number:t.selectedNum,productId:0,isSecond:0,es_goods_id:"",price:""};if(0!=this.activityId){if(ne()(t.selectedSkuComb,"s3"))return void this.$toast({message:"目前仅支持两规格",duration:1500});ne()(t.selectedSkuComb,"s2")?s.productId=this.getProductId(t.selectedSkuComb.s1,t.selectedSkuComb.s2):s.productId=this.getProductIdByOne(t.selectedSkuComb.s1)}else s.isSecond="1",s.es_goods_id=t.litemallOrderGoods.orderId,s.goodsId=t.litemallOrderGoods.goodsId,s.number=t.litemallOrderGoods.number,s.productId=t.litemallOrderGoods.productId;Object(ce["r"])(s).then((function(t){var s=t.data.data;Object(de["d"])({CartId:s}),i.showSku=!1,e.$router.push("/order/checkout/".concat(e.activityId))}))},skuAdapter:function(){var t=this.setSkuTree(),e=this.setSkuList(),i={price:parseInt(this.goods.info.retailPrice),stock_num:0,collection_id:"",none_sku:!1,hide_stock:!0};this.sku=ye({tree:t,list:e},i),this.skuGoods={title:this.goods.info.name,picture:this.goods.info.picUrl}},setSkuList:function(){var t=this,e=[];return ue()(this.goods.productList,(function(i){var s={};ue()(i.specifications,(function(e,i){s["s"+(1+~~i)]=t.findSpecValueIdByName(e)})),s.price=100*i.price,s.stock_num=i.number,e.push(s)})),e},findSpecValueIdByName:function(t){var e=0;return ue()(this.goods.specificationList,(function(i){ue()(i.valueList,(function(i){i.value!==t||(e=i.id)}))})),e},setSkuTree:function(){var t=[];return ue()(this.goods.specificationList,(function(e,i){var s=[];ue()(e.valueList,(function(t){t.name=t.value,s.push({id:t.id,name:t.value,imUrl:t.picUrl})})),t.push({k:e.name,v:s,k_s:"s"+(1+~~i)})})),t}},components:(Xt={},Object(ie["a"])(Xt,V["a"].name,V["a"]),Object(ie["a"])(Xt,ee["a"].name,ee["a"]),Object(ie["a"])(Xt,te["a"].name,te["a"]),Object(ie["a"])(Xt,Zt.name,Zt),Object(ie["a"])(Xt,j.name,j),Object(ie["a"])(Xt,S.name,S),Object(ie["a"])(Xt,m.name,m),Object(ie["a"])(Xt,Se.name,Se),Xt)},je=xe,Ce=(i("9796"),Object(ke["a"])(je,s,n,!1,null,"2917b4dc",null));e["default"]=Ce.exports},bf60:function(t,e,i){},d10a:function(t,e,i){},d1e1:function(t,e,i){"use strict";var s=i("d282"),n=i("9884"),r=Object(s["a"])("row"),a=r[0],o=r[1];e["a"]=a({mixins:[Object(n["b"])("vanRow")],props:{type:String,align:String,justify:String,tag:{type:String,default:"div"},gutter:{type:[Number,String],default:0}},computed:{spaces:function(){var t=Number(this.gutter);if(t){var e=[],i=[[]],s=0;return this.children.forEach((function(t,e){s+=Number(t.span),s>24?(i.push([e]),s-=24):i[i.length-1].push(e)})),i.forEach((function(i){var s=t*(i.length-1)/i.length;i.forEach((function(i,n){if(0===n)e.push({right:s});else{var r=t-e[i-1].right,a=s-r;e.push({left:r,right:a})}}))})),e}}},methods:{onClick:function(t){this.$emit("click",t)}},render:function(){var t,e=arguments[0],i=this.align,s=this.justify,n="flex"===this.type;return e(this.tag,{class:o((t={flex:n},t["align-"+i]=n&&i,t["justify-"+s]=n&&s,t)),on:{click:this.onClick}},[this.slots()])}})},dad1:function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"d",(function(){return r})),i.d(e,"b",(function(){return a})),i.d(e,"f",(function(){return o})),i.d(e,"e",(function(){return u})),i.d(e,"g",(function(){return c})),i.d(e,"c",(function(){return l}));var s=i("b775");function n(t){return Object(s["a"])({url:"wx/user/addNotice",method:"post",data:t})}function r(t){return Object(s["a"])({url:"wx/second/selectByStateList",method:"post",data:t})}function a(){return Object(s["a"])({url:"wx/second/querySecondBanner",method:"post"})}function o(){return Object(s["a"])({url:"wx/user/selectNoticeList",method:"post"})}function u(t){return Object(s["a"])({url:"wx/second/selectByUserIdList",method:"post",data:t})}function c(t){return Object(s["a"])({url:"wx/second/updateOrderGoodsState",method:"post",data:t})}function l(t){return Object(s["a"])({url:"wx/second/selectByIdOrderGoods",method:"post",data:t})}},e41f:function(t,e,i){"use strict";var s=i("d282"),n=i("a142"),r=i("6605"),a=i("ad06"),o=Object(s["a"])("popup"),u=o[0],c=o[1];e["a"]=u({mixins:[Object(r["a"])()],props:{round:Boolean,duration:[Number,String],closeable:Boolean,transition:String,safeAreaInsetBottom:Boolean,closeIcon:{type:String,default:"cross"},closeIconPosition:{type:String,default:"top-right"},position:{type:String,default:"center"},overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0}},beforeCreate:function(){var t=this,e=function(e){return function(i){return t.$emit(e,i)}};this.onClick=e("click"),this.onOpened=e("opened"),this.onClosed=e("closed")},render:function(){var t,e=arguments[0];if(this.shouldRender){var i=this.round,s=this.position,r=this.duration,o="center"===s,u=this.transition||(o?"van-fade":"van-popup-slide-"+s),l={};if(Object(n["b"])(r)){var d=o?"animationDuration":"transitionDuration";l[d]=r+"s"}return e("transition",{attrs:{name:u},on:{afterEnter:this.onOpened,afterLeave:this.onClosed}},[e("div",{directives:[{name:"show",value:this.value}],style:l,class:c((t={round:i},t[s]=s,t["safe-area-inset-bottom"]=this.safeAreaInsetBottom,t)),on:{click:this.onClick}},[this.slots(),this.closeable&&e(a["a"],{attrs:{role:"button",tabindex:"0",name:this.closeIcon},class:c("close-icon",this.closeIconPosition),on:{click:this.close}})])])}}})}}]);